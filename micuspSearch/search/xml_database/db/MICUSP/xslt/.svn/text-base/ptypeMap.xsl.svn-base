<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="http://micusp.elicorpora.info" version="2.0" exclude-result-prefixes="my"><my:mapping><map to="Report" from="TechnicalOrLabReport"/><map to="Critique" from="Critique"/><map to="Critique" from="CaseStudy"/><map to="ResearchPaper" from="TermPaper"/><map to="Essay" from="LiteratureReview"/><map to="ResponsePaper" from="ResponsePaper"/><map to="CreativeWriting" from="OtherTextType"/><map to="Proposal" from="ResearchProposal"/></my:mapping><xsl:template match="*"><xsl:copy><xsl:copy-of select="@*"/><xsl:apply-templates/></xsl:copy></xsl:template><xsl:template match="textClass/catRef"><xsl:variable name="vals" select="tokenize(@target,' ')"/><xsl:variable name="ptype" select="document('')//map[@from=$vals[3]]/@to"/><catRef TEIform="catRef"><xsl:attribute name="target"><xsl:value-of select="concat(string-join(subsequence($vals,1,2),' '),' ', $ptype, ' ', string-join(subsequence($vals,3),' '))"/></xsl:attribute></catRef></xsl:template></xsl:stylesheet>